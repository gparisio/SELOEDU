{% extends "base.html" %}

{% block title %} Perfil - SELOEDU {% endblock %}

{% block content %}

<div class="container mt-5">
    <h2>Meu Perfil - {{ usuario.nome }}</h2>
    <p class="text-muted">Revise suas informações ou preencha o formulário abaixo para atualizar seu perfil.</p>

    <div class="card mb-4 bg-light">
        <div class="card-header">
            Detalhes Atuais
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <strong>Telefone:</strong> 
                {{ perfil.telefone if perfil and perfil.telefone else 'Não informado' }}
            </li>
            <li class="list-group-item">
                <strong>Instituição:</strong> 
                {{ perfil.instituicao if perfil and perfil.instituicao else 'Não informada' }}
            </li>
            <li class="list-group-item">
                <strong>Cargo:</strong> 
                {{ perfil.cargo if perfil and perfil.cargo else 'Não informado' }}
            </li>
            <li class="list-group-item">
                <strong>Bio:</strong> 
                {{ perfil.bio if perfil and perfil.bio else 'Nenhuma biografia fornecida.' }}
            </li>
        </ul>
    </div>
    <h4 class="mt-4">Atualizar Informações</h4>

    <form method="post" action="{{ url_for('users.atualizar_perfil') }}">
        
        {{ form.hidden_tag() if form }}

        <div class="mb-3">
            <label for="telefone" class="form-label">Telefone (Ex: 81999998888)</label>
            <input type="text" 
                   class="form-control" 
                   id="telefone" 
                   name="telefone" 
                   value="{{ perfil.telefone if perfil and perfil.telefone else '' }}" 
                   maxlength="11"
                   placeholder="Seu telefone com DDD (somente números)">
        </div>

        <div class="mb-3">
            <label for="instituicao" class="form-label">Instituição</label>
            <input type="text" 
                   class="form-control" 
                   id="instituicao" 
                   name="instituicao" 
                   value="{{ perfil.instituicao if perfil and perfil.instituicao else '' }}"
                   maxlength="100"
                   placeholder="Nome da sua instituição atual">
        </div>

        <div class="mb-3">
            <label for="cargo" class="form-label">Cargo</label>
            <input type="text" 
                   class="form-control" 
                   id="cargo" 
                   name="cargo" 
                   value="{{ perfil.cargo if perfil and perfil.cargo else '' }}"
                   maxlength="100"
                   placeholder="Seu cargo ou função">
        </div>

        <div class="mb-3">
            <label for="bio" class="form-label">Bio (Resumo Pessoal)</label>
            <textarea class="form-control" 
                      id="bio" 
                      name="bio" 
                      rows="3" 
                      maxlength="100"
                      placeholder="Fale um pouco sobre você e sua experiência (máx. 100 caracteres).">{{ perfil.bio if perfil and perfil.bio else '' }}</textarea>
        </div>
        
        <button type="submit" class="btn btn-primary">Salvar Perfil</button>
        <a href="{{ url_for('home') }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>

{% endblock %}